{% extends "base.html.twig" %}

{% set title = 'image_upload.title'|trans({'%coaster%': coaster.name}) %}
{% set openedSidebar = true %}
{% block title %}{{ title }}{% endblock %}

{% block body %}
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="flash-{{ label }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}
    <div class="panel panel-flat">
        <div class="panel-body">
            {{ form_start(form, {'attr': {'data-controller': 'form-submit', 'data-form-submit-loading-text-value': 'image_upload.form.uploading'|trans, 'data-form-submit-required-error-value': 'image_upload.form.copyright_agreement.required'|trans({}, 'validators'), 'data-action': 'submit->form-submit#submit'}}) }}
            <div class="form-group">
                {{ form_label(form.file, "", {'label_attr': {'class': 'control-label text-bold'}}) }}
                {{ form_widget(form.file, {'attr': {'class': 'form-control'}}) }}
                {{ form_errors(form.file) }}
                <span class="help-block">{{ 'image_upload.form.file.helper'|trans }}</span>
            </div>
            <div class="form-group">
                {{ form_label(form.credit, "", {'label_attr': {'class': 'control-label text-bold'}}) }}
                {{ form_widget(form.credit, {'attr': {'class': 'form-control'}}) }}
                {{ form_errors(form.credit) }}
            </div>
            <div class="form-group">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" name="{{ form.watermarked.vars.full_name }}" id="{{ form.watermarked.vars.id }}" value="1"{% if form.watermarked.vars.checked %} checked{% endif %}>
                        {{ 'image_upload.form.watermark.label'|trans }}
                    </label>
                </div>
                <span class="help-block">{{ 'image_upload.form.watermark.helper'|trans }}</span>
                {% do form.watermarked.setRendered %}
            </div>
            <div class="form-group {% if form.copyrightAgreement.vars.errors|length > 0 %}has-error{% endif %}">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" name="{{ form.copyrightAgreement.vars.full_name }}" id="{{ form.copyrightAgreement.vars.id }}" value="1"{% if form.copyrightAgreement.vars.checked %} checked{% endif %} data-form-submit-target="requiredCheckbox">
                        {{ 'image_upload.form.copyright_agreement.label'|trans }}
                    </label>
                </div>
                {{ form_errors(form.copyrightAgreement) }}
                {% do form.copyrightAgreement.setRendered %}
            </div>
            <div class="form-group">
                {{ form_widget(form.upload, {'attr': {'class': 'btn btn-primary'}}) }}
            </div>
            {{ form_rest(form) }}
            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}
