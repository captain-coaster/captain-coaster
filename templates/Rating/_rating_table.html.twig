<div class="bg-white dark:bg-neutral-900 rounded-2xl shadow-sm overflow-hidden">
  <div class="overflow-x-auto">
    <table class="table table-hover mb-0">
      <thead>
      <tr>
        <th>{{ knp_pagination_sortable(ratings, 'users.ratings.coaster'|trans, 'c.name') }}</th>
        <th class="d-none d-md-table-cell">{{ knp_pagination_sortable(ratings, 'users.ratings.manufacturer'|trans, ['m.name']) }}</th>
        <th class="d-none d-md-table-cell">{{ knp_pagination_sortable(ratings, 'users.ratings.opening_date'|trans, ['c.openingDate']) }}</th>
        <th>{{ knp_pagination_sortable(ratings, 'users.ratings.rating'|trans, ['r.value']) }}</th>
        <th class="d-none d-md-table-cell">{{ knp_pagination_sortable(ratings, 'users.ratings.ridden_at'|trans, 'r.riddenAt') }}</th>
        {% if is_granted('delete', ratings|first) %}
          <th class="text-center d-none d-md-table-cell w-5">{{ ux_icon('tabler:arrow-down', {'class': 'icon-sm'}) }}</th>
        {% endif %}
      </tr>
      </thead>
      <tbody>
      {% for rating in ratings %}
        <tr id="tr-coaster-{{ rating.coaster.id }}">
          <td>
            <a href="{{ path('show_coaster', {'id': rating.coaster.id, 'slug': rating.coaster.slug}) }}"
               class="font-semibold coaster-link">{{ rating.coaster.name }}</a>
            <div class="text-neutral-600 dark:text-neutral-400 small">
              <span class="status-mark bg-{{ rating.coaster.status.type }} mr-1"></span>
              {{ rating.coaster.park.name }}
            </div>
          </td>
          <td class="d-none d-md-table-cell">
            {{ rating.coaster.manufacturer.name|default('-') }}
          </td>
          <td class="d-none d-md-table-cell">
            {{ rating.coaster.openingDate is empty ? '-' : rating.coaster.openingDate|date('Y') }}
          </td>
          <td>
            <div class="csrf-protection" data-controller="csrf-protection rating"
                 data-csrf-protection-token-value="{{ csrf_token('rating') }}"
                 data-rating-csrf-protection-outlet=".csrf-protection"
                 data-rating-coaster-id-value="{{ rating.coaster.id }}"
                 data-rating-current-value-value="{{ rating.value }}"
                 data-rating-rating-id-value="{{ rating.id }}"
                 data-rating-locale-value="{{ app.request.locale }}"
                 {% if not is_granted('update', rating) %}data-rating-readonly-value="true"{% endif %}>
              <div data-rating-target="rating" class="text-2xl"></div>
            </div>
          </td>
          <td class="d-none d-md-table-cell">
            {{ rating.riddenAt is empty ? '-' : rating.riddenAt|format_datetime('short', 'none') }}
          </td>
          {% if is_granted('delete', rating) %}
          <td class="text-center d-none d-md-table-cell">
            <div data-controller="csrf-protection rating-actions"
                 data-csrf-protection-token-value="{{ csrf_token('rating') }}"
                 data-rating-actions-csrf-protection-outlet=".csrf-protection"
                 data-rating-actions-rating-id-value="{{ rating.id }}"
                 data-rating-actions-locale-value="{{ app.request.locale }}"
                 data-rating-actions-mode-value="table">
              <a href="#" data-action="click->rating-actions#delete" data-rating-actions-target="deleteButton" class="text-red-600 dark:text-red-400">{{ ux_icon('tabler:trash', {'class': 'icon-sm'}) }}</a>
            </div>
          </td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{{ knp_pagination_render(ratings) }}
