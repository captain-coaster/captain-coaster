{% extends "base.html.twig" %}

{% import "helper.html.twig" as helper %}

{% set title = 'users.images.title'|trans({'%name%': user.displayName}) %}
{% block title %}{{ title }}{% endblock %}

{% block body %}
  {% if images|length > 0 %}
    <div id="coaster-photos" class="row">
      <div class="panel panel-flat border-top-blue">
        <div class="panel-body no-border no-padding-top" 
             data-controller="gallery" 
             data-gallery-name-value="user-images"
             data-gallery="user-images">
          {% for image in images %}
            <div class="col-sm-3">
              <a class="m-10" href="{{ pictures_cdn }}/1440x1440/{{ image.filename }}"
                 data-cropped-thumbnail="{{ pictures_cdn }}/280x210/{{ image.filename }}">
                <div class="thumb">
                  <img src="{{ pictures_cdn }}/280x210/{{ image.filename }}" alt="{{ image.coaster.name }}">
                </div>
              </a>
              <div class="text-size-small text-muted"
                   data-controller="image-like"
                   data-image-like-image-id-value="{{ image.id }}"
                   data-image-like-locale-value="{{ app.request.locale }}"
                   data-image-like-liked-value="{% if image.id in userLikes %}true{% else %}false{% endif %}"
                   style="display: flex; align-items: center; gap: 2px;">
                <button type="button"
                        data-action="click->image-like#toggle"
                        data-image-like-target="icon"
                        class="btn-link text-muted p-0 border-0 bg-transparent"
                        style="cursor: pointer; display: inline-flex; align-items: center;">
                </button><span data-image-like-target="counter">{{ image.likeCounter }}</span>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
    {{ knp_pagination_render(images) }}
  {% else %}
    No photos
  {% endif %}
{% endblock %}

{% block javascripts %}
{% endblock %}
