{% extends "layouts/base.html.twig" %}

{% import "macros/_macros_helpers.html.twig" as helper %}

{% set title = 'users.images.title'|trans({'%name%': user.displayName}) %}
{% block title %}{{ title }}{% endblock %}

{% block body %}
  {% if images|length > 0 %}
    <div class="bg-white dark:bg-neutral-900 rounded-2xl shadow-sm overflow-hidden">
      <div class="p-6" 
           data-controller="gallery" 
           data-gallery-name-value="user-images"
           data-gallery="user-images">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-4 gap-3">
          {% for image in images %}
            <div class="col-span-6 md:col-span-3">
              <a href="{{ pictures_cdn }}/1440x1440/{{ image.filename }}"
                 data-cropped-thumbnail="{{ pictures_cdn }}/280x210/{{ image.filename }}"
                 data-gallery-target="link">
                <div class="thumb">
                  <img src="{{ pictures_cdn }}/280x210/{{ image.filename }}" 
                       class="w-full h-auto rounded"
                       alt="{{ image.coaster.name }}">
                </div>
              </a>
              <div class="text-sm text-neutral-600 dark:text-neutral-400 flex items-center gap-1 mt-1"
                   data-controller="image-like"
                   data-image-like-image-id-value="{{ image.id }}"
                   data-image-like-locale-value="{{ app.request.locale }}"
                   data-image-like-liked-value="{% if image.id in userLikes %}true{% else %}false{% endif %}">
                <button type="button"
                        data-action="click->image-like#toggle"
                        data-image-like-target="icon"
                        class="p-0 border-0 bg-transparent inline-flex items-center text-neutral-600 dark:text-neutral-400 hover:text-cc-blue-600 dark:hover:text-cc-blue-400 transition-colors"
                </button><span data-image-like-target="counter">{{ image.likeCounter }}</span>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
    {{ knp_pagination_render(images) }}
  {% else %}
    <div class="bg-white dark:bg-neutral-900 rounded-2xl shadow-sm overflow-hidden">
      <div class="p-6 text-center text-neutral-600 dark:text-neutral-400 py-4">
        {{ 'users.images.empty'|trans|default('No photos') }}
      </div>
    </div>
  {% endif %}
{% endblock %}

{% block javascripts %}
{% endblock %}
