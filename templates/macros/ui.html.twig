{#
    UI Macros Library

    Usage:
    {% import 'macros/ui.html.twig' as ui %}
    {{ ui.button('Save', 'primary') }}
    {{ ui.badge('New', 'success') }}
    {{ ui.starRating(4.5, 'md') }}
#}

{% macro button(text, variant='primary', type='button', class='', icon=null) %}
    {% set variants = {
        'primary': 'text-white bg-cc-blue-600 hover:bg-cc-blue-700 focus:ring-cc-blue-500 border-transparent',
        'secondary': 'text-neutral-700 dark:text-neutral-200 bg-white dark:bg-neutral-800 border-neutral-300 dark:border-neutral-600 hover:bg-neutral-50 dark:hover:bg-neutral-700 focus:ring-cc-blue-500',
        'danger': 'text-white bg-red-600 hover:bg-red-700 focus:ring-red-500 border-transparent'
    } %}

    <button type="{{ type }}"
            class="inline-flex justify-center items-center px-6 py-3 border text-sm font-medium rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 {{ variants[variant] }} {{ class }}">
        {% if icon %}
            <twig:ux:icon :name="icon" class="w-5 h-5 mr-2" />
        {% endif %}
        {{ text }}
    </button>
{% endmacro %}

{% macro badge(text, variant='neutral', class='') %}
    {% set variants = {
        'neutral': 'bg-neutral-100 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300',
        'primary': 'bg-cc-blue-100 dark:bg-cc-blue-900/30 text-cc-blue-700 dark:text-cc-blue-300',
        'success': 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300',
        'warning': 'bg-cc-warm-100 dark:bg-cc-warm-900/30 text-cc-warm-700 dark:text-cc-warm-300',
        'danger': 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300'
    } %}

    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium {{ variants[variant] }} {{ class }}">
        {{ text }}
    </span>
{% endmacro %}

{% macro starRating(rating, size='md', interactive=false) %}
    {% set sizes = {
        'xs': 'w-3 h-3',
        'sm': 'w-4 h-4',
        'md': 'w-5 h-5',
        'lg': 'w-6 h-6',
        'xl': 'w-8 h-8'
    } %}
    
    {% set iconSize = sizes[size] %}
    
    {# Calculate full stars, half star, and empty stars #}
    {% set fullStars = rating|round(0, 'floor') %}
    {% set hasHalfStar = (rating - fullStars) >= 0.5 %}
    
    <span class="inline-flex items-center {{ interactive ? 'rating-stars' : '' }}">
        {# Full stars #}
        {% for i in 1..fullStars %}
            <twig:ux:icon name="tabler:star-filled" 
                          class="{{ iconSize }} text-cc-warm-400 {{ interactive ? 'transition-transform duration-150 hover:scale-110 cursor-pointer' : '' }}" 
                          aria-hidden="true" />
        {% endfor %}
        
        {# Half star #}
        {% if hasHalfStar %}
            <twig:ux:icon name="tabler:star-half-filled" 
                          class="{{ iconSize }} text-cc-warm-400 {{ interactive ? 'transition-transform duration-150 hover:scale-110 cursor-pointer' : '' }}" 
                          aria-hidden="true" />
        {% endif %}
    </span>
{% endmacro %}
