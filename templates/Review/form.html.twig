{% extends "layouts/base.html.twig" %}
{% set title = 'review.form.title'|trans({'%name%': coaster.name}) %}
{% set subTitle = '' %}
{% block title %}{{ title }}{% endblock %}

{% block javascripts %}
{% endblock %}

{% block stylesheets %}

{% endblock %}

{% block body %}
  <section class="bg-white dark:bg-neutral-900 rounded-2xl overflow-hidden shadow-sm">
    <div class="px-6 py-4 bg-neutral-50 dark:bg-neutral-800 border-b border-neutral-100 dark:border-neutral-700">
      <h1 class="text-lg font-semibold text-neutral-900 dark:text-white">{{ 'review.share'|trans }}</h1>
    </div>
    <div class="p-6">
      {{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}
      <div>
        <label class="block text-sm font-medium leading-6 text-neutral-900 dark:text-white mb-2">
          {{ 'review.value'|trans }}
          <span class="text-red-500 ml-1" aria-label="{{ 'form.required'|trans }}">*</span>
        </label>
        {{ form_widget(form.value, {'attr': {'style': 'display:none;'}}) }}
        <div data-controller="rating"
             data-rating-coaster-id-value="{{ coaster.id }}"
             data-rating-current-value-value="{{ form.value.vars.value|default(0) }}"
             data-rating-locale-value="{{ app.request.locale }}"
             data-rating-readonly-value="false"
             data-rating-form-field-id-value="review_value"></div>
      </div>
      <div>
        {{ form_label(form.riddenAt) }}
        {{ form_widget(form.riddenAt, {
          'attr': {
            'data-controller': 'datepicker',
            'data-datepicker-format-value': 'yyyy-mm-dd',
            'data-datepicker-autoclose-value': 'true'
          } | merge(coaster.openingDate ? {'data-datepicker-start-date-value': coaster.openingDate|date('Y-m-d')} : {}) | merge(coaster.closingDate ? {'data-datepicker-end-date-value': coaster.closingDate|date('Y-m-d')} : {})
        }) }}
        {{ form_errors(form.riddenAt) }}
      </div>
      <div>
        {{ form_label(form.pros) }}
        {{ form_widget(form.pros, {
          'attr': {
            'data-controller': 'enhanced-select',
            'data-enhanced-select-multiple-value': 'true',
            'data-enhanced-select-searchable-value': 'true',
            'data-enhanced-select-maximum-selection-length-value': '3',
            'data-enhanced-select-placeholder-value': 'Select pros...'
          }
        }) }}
        {{ form_errors(form.pros) }}
      </div>
      <div>
        {{ form_label(form.cons) }}
        {{ form_widget(form.cons, {
          'attr': {
            'data-controller': 'enhanced-select',
            'data-enhanced-select-multiple-value': 'true',
            'data-enhanced-select-searchable-value': 'true',
            'data-enhanced-select-maximum-selection-length-value': '3',
            'data-enhanced-select-placeholder-value': 'Select cons...'
          }
        }) }}
        {{ form_errors(form.cons) }}
      </div>
      <div>
        {{ form_label(form.review) }}
        {{ form_widget(form.review, {'attr': {'cols': '5', 'rows': '5'}}) }}
        {{ form_errors(form.review) }}
      </div>
      <div>
        {{ form_label(form.language) }}
        {{ form_widget(form.language, {
          'attr': {
            'data-controller': 'enhanced-select',
            'data-enhanced-select-placeholder-value': 'Select language...'
          }
        }) }}
        {{ form_errors(form.language) }}
      </div>
      <div class="flex justify-end">
        <button type="submit" class="inline-flex justify-center items-center px-6 py-3 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-cc-blue-600 hover:bg-cc-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cc-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 gap-2">
          {{ 'review.send'|trans }}
          {{ ux_icon('tabler:arrow-right', {'class': 'w-5 h-5', 'aria-hidden': 'true'}) }}
        </button>
      </div>
      {{ form_rest(form) }}
      {{ form_end(form) }}
    </div>
  </section>
{% endblock %}
