{# Ranking stats - modern collapsible card using native details/summary #}
<details class="bg-white dark:bg-neutral-900 rounded-xl shadow-sm mb-4 group">
  <summary class="flex items-center justify-between p-4 cursor-pointer list-none [&::-webkit-details-marker]:hidden">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-full bg-linear-to-br from-cc-blue-500 to-cc-blue-600 flex items-center justify-center">
        {{ ux_icon('tabler:trophy', {'class': 'w-5 h-5 text-white', 'aria-hidden': 'true'}) }}
      </div>
      <div>
        <div class="text-sm font-medium text-neutral-900 dark:text-white">{{ ranking.computedAt|format_datetime('long', 'none') }}</div>
        <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ranking.rankedCoasterNumber }} {{ 'coaster_ranking.info.coasters_ranked.short'|trans }} â€¢ {{ ranking.userNumber|shortNum }} {{ 'coaster_ranking.info.users'|trans }}</div>
      </div>
    </div>
    <div class="text-cc-blue-600 dark:text-cc-blue-400">
      {{ ux_icon('tabler:chevron-down', {'class': 'w-5 h-5 transition-transform duration-200 group-open:rotate-180', 'aria-hidden': 'true'}) }}
    </div>
  </summary>

  {# Expandable content #}
  <div>
    {# Stats grid with gradient background #}
    <div class="mx-4 mb-4 rounded-xl bg-linear-to-br from-cc-blue-500 to-indigo-600 p-4">
      <div class="grid grid-cols-2 gap-3">
        {# Coasters #}
        <div class="bg-white/15 backdrop-blur-sm rounded-xl p-4">
          <div class="text-white/80 text-xs mb-1">{{ 'coaster_ranking.info.coasters_ranked.long'|trans }}</div>
          <div class="text-white text-2xl font-bold">{{ ranking.rankedCoasterNumber }}</div>
          {% if ranking.rankedCoasterNumber - previousRanking.rankedCoasterNumber > 0 %}
            <div class="text-green-300 text-xs mt-1">+{{ ranking.rankedCoasterNumber - previousRanking.rankedCoasterNumber }}</div>
          {% endif %}
        </div>
        
        {# Ratings #}
        <div class="bg-white/15 backdrop-blur-sm rounded-xl p-4">
          <div class="text-white/80 text-xs mb-1">{{ 'coaster_ranking.info.ratings'|trans }}</div>
          <div class="text-white text-2xl font-bold">{{ ranking.ratingNumber|shortNum }}</div>
          {% if ranking.ratingNumber - previousRanking.ratingNumber > 1000 %}
            <div class="text-green-300 text-xs mt-1">+{{ (ranking.ratingNumber - previousRanking.ratingNumber)|shortNum }}</div>
          {% endif %}
        </div>
        
        {# Users #}
        <div class="bg-white/15 backdrop-blur-sm rounded-xl p-4">
          <div class="text-white/80 text-xs mb-1">{{ 'coaster_ranking.info.users'|trans }}</div>
          <div class="text-white text-2xl font-bold">{{ ranking.userNumber|shortNum }}</div>
          {% if ranking.userNumber - previousRanking.userNumber > 0 %}
            <div class="text-green-300 text-xs mt-1">+{{ ranking.userNumber - previousRanking.userNumber }}</div>
          {% endif %}
        </div>
        
        {# Comparisons #}
        <div class="bg-white/15 backdrop-blur-sm rounded-xl p-4">
          <div class="text-white/80 text-xs mb-1">{{ 'coaster_ranking.info.comparisons.long'|trans }}</div>
          <div class="text-white text-2xl font-bold">{{ ranking.comparisonNumber|shortNum }}</div>
          {% if ranking.comparisonNumber - previousRanking.comparisonNumber > 1000 %}
            <div class="text-green-300 text-xs mt-1">+{{ (ranking.comparisonNumber - previousRanking.comparisonNumber)|shortNum }}</div>
          {% endif %}
        </div>
      </div>
      
      {# Next update #}
      {% set nextRankingDate = 'now'|date_modify('first day of next month midnight 1 minute') %}
      {% if nextRankingDate|date('U') - 'now'|date('U') > 7200 %}
        <div class="mt-3 pt-3 border-t border-white/20 text-white/70 text-xs flex items-center gap-2">
          {{ ux_icon('tabler:clock', {'class': 'w-4 h-4', 'aria-hidden': 'true'}) }}
          {{ 'coaster_ranking.info.next'|trans({'%date%': nextRankingDate|ago}) }}
        </div>
      {% endif %}
    </div>

    {# Learn more link #}
    <a href="{{ path('ranking_learn_more') }}" class="flex items-center justify-between mx-4 mb-4 px-4 py-3 text-sm bg-neutral-100 dark:bg-neutral-800 rounded-xl hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors">
      <span class="text-neutral-700 dark:text-neutral-300">{{ 'coaster_ranking.info.learn_more'|trans }}</span>
      {{ ux_icon('tabler:chevron-right', {'class': 'w-5 h-5 text-neutral-400', 'aria-hidden': 'true'}) }}
    </a>
  </div>
</details>
