/*
 * Search Component Styles
 * Covers both dropdown autocomplete and full-page search results
 * Mobile-first approach with responsive enhancements
 */

/* ==========================================================================
   Search Dropdown (Autocomplete)
   ========================================================================== */

/* Result item - shared between dropdown and page */
.search-result-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    cursor: pointer;
    transition: background-color 150ms ease-in-out;
}

.search-result-item:hover,
.search-result-item.selected {
    background-color: var(--color-neutral-100);
}

:is(.dark .search-result-item:hover),
:is(.dark .search-result-item.selected) {
    background-color: var(--color-neutral-700);
}

/* Emoji icon container */
.search-result-emoji {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    font-size: 1.25rem;
    background-color: var(--color-neutral-100);
    border-radius: 0.75rem;
    flex-shrink: 0;
}

:is(.dark .search-result-emoji) {
    background-color: var(--color-neutral-700);
}

/* Result content */
.search-result-content {
    flex: 1;
    min-width: 0;
}

.search-result-name {
    font-size: 0.9375rem;
    font-weight: 500;
    color: var(--color-neutral-900);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

:is(.dark .search-result-name) {
    color: white;
}

.search-result-name strong {
    color: var(--color-cc-blue-600);
    font-weight: 600;
}

:is(.dark .search-result-name strong) {
    color: var(--color-cc-blue-400);
}

.search-result-subtitle {
    font-size: 0.8125rem;
    color: var(--color-neutral-500);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 0.125rem;
}

:is(.dark .search-result-subtitle) {
    color: var(--color-neutral-400);
}

.search-result-subtitle strong {
    color: var(--color-cc-blue-600);
    font-weight: 600;
}

:is(.dark .search-result-subtitle strong) {
    color: var(--color-cc-blue-400);
}

/* Show more results link */
.search-show-more {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem 1rem;
    border-top: 1px solid var(--color-neutral-200);
    cursor: pointer;
    transition: background-color 150ms ease-in-out;
}

:is(.dark .search-show-more) {
    border-top-color: var(--color-neutral-700);
}

.search-show-more:hover,
.search-show-more.selected {
    background-color: var(--color-neutral-100);
}

:is(.dark .search-show-more:hover),
:is(.dark .search-show-more.selected) {
    background-color: var(--color-neutral-700);
}

.search-show-more-content {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-cc-blue-600);
}

:is(.dark .search-show-more-content) {
    color: var(--color-cc-blue-400);
}

/* Loading state */
.search-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    gap: 0.75rem;
}

.search-loading-spinner {
    width: 1.5rem;
    height: 1.5rem;
    border: 2px solid var(--color-neutral-200);
    border-top-color: var(--color-cc-blue-500);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

:is(.dark .search-loading-spinner) {
    border-color: var(--color-neutral-700);
    border-top-color: var(--color-cc-blue-400);
}

.search-loading-text {
    font-size: 0.875rem;
    color: var(--color-neutral-500);
}

:is(.dark .search-loading-text) {
    color: var(--color-neutral-400);
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* No results state */
.search-no-results {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    gap: 0.5rem;
}

.search-no-results-icon {
    font-size: 1.5rem;
    opacity: 0.6;
}

.search-no-results-text {
    font-size: 0.875rem;
    color: var(--color-neutral-500);
}

:is(.dark .search-no-results-text) {
    color: var(--color-neutral-400);
}

/* Error state */
.search-error {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    gap: 0.5rem;
}

.search-error-icon {
    font-size: 1.5rem;
}

.search-error-text {
    font-size: 0.875rem;
    color: var(--color-red-500);
}

/* ==========================================================================
   Full Page Search Results
   ========================================================================== */

/* Results container */
.search-results-container {
    display: flex;
    flex-direction: column;
}

/* Page result item - enhanced styling for full page */
.search-result-item-page {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--color-neutral-100);
    cursor: pointer;
    transition: background-color 150ms ease-in-out;
}

:is(.dark .search-result-item-page) {
    border-bottom-color: var(--color-neutral-800);
}

.search-result-item-page:last-child {
    border-bottom: none;
}

.search-result-item-page:hover {
    background-color: var(--color-neutral-50);
}

:is(.dark .search-result-item-page:hover) {
    background-color: var(--color-neutral-800);
}

/* Page emoji - larger for full page */
.search-result-item-page .search-result-emoji {
    width: 3rem;
    height: 3rem;
    font-size: 1.5rem;
    background-color: var(--color-neutral-100);
    border-radius: 0.75rem;
}

:is(.dark .search-result-item-page .search-result-emoji) {
    background-color: var(--color-neutral-800);
}

/* Empty state styling */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 3rem 1.5rem;
    text-align: center;
    gap: 1rem;
}

.empty-state-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 4rem;
    height: 4rem;
    background-color: var(--color-neutral-100);
    border-radius: 50%;
}

:is(.dark .empty-state-icon) {
    background-color: var(--color-neutral-800);
}

/* ==========================================================================
   Mobile Optimizations (< 768px)
   ========================================================================== */

@media (max-width: 767px) {
    /* Dropdown results - more compact on mobile */
    .search-result-item {
        padding: 0.625rem 0.875rem;
        gap: 0.625rem;
    }

    .search-result-emoji {
        width: 2.25rem;
        height: 2.25rem;
        font-size: 1.125rem;
    }

    .search-result-name {
        font-size: 0.875rem;
    }

    .search-result-subtitle {
        font-size: 0.75rem;
    }

    /* Page results - stack image below on very small screens */
    .search-result-item-page {
        padding: 0.875rem 1rem;
        gap: 0.75rem;
    }

    .search-result-item-page .search-result-emoji {
        width: 2.5rem;
        height: 2.5rem;
        font-size: 1.25rem;
    }

    /* Coaster image - smaller on mobile */
    .search-result-item-page .shrink-0 {
        width: 4.5rem;
        height: 3.375rem;
    }

    /* Empty state - more compact */
    .empty-state {
        padding: 2rem 1rem;
    }

    .empty-state-icon {
        width: 3rem;
        height: 3rem;
    }
}

/* ==========================================================================
   Desktop Enhancements (>= 768px)
   ========================================================================== */

@media (min-width: 768px) {
    /* Dropdown results - slightly more spacious */
    .search-result-item {
        padding: 0.875rem 1.25rem;
    }

    /* Page results - more generous spacing */
    .search-result-item-page {
        padding: 1.25rem 1.5rem;
        gap: 1.25rem;
    }

    .search-result-item-page .search-result-emoji {
        width: 3.5rem;
        height: 3.5rem;
        font-size: 1.75rem;
    }

    /* Coaster image - larger on desktop */
    .search-result-item-page .shrink-0 {
        width: 7rem;
        height: 5.25rem;
    }
}

/* ==========================================================================
   Mobile Full-Screen Search
   ========================================================================== */

/* Mobile search container - results appear inline, not as dropdown */
.mobile-search-container [data-search-target='dropdown'] {
    position: fixed;
    top: 65px;
    left: 0;
    right: 0;
    bottom: 0;
    margin-top: 0;
    background-color: var(--color-neutral-50);
    border: none;
    border-radius: 0;
    box-shadow: none;
    overflow-y: auto;
}

:is(.dark .mobile-search-container [data-search-target='dropdown']) {
    background-color: var(--color-neutral-900);
}

.mobile-search-container
    [data-search-target='dropdown'].hidden
    + .mobile-search-placeholder {
    display: flex;
}

.mobile-search-container
    [data-search-target='dropdown']:not(.hidden)
    + .mobile-search-placeholder {
    display: none;
}

/* Style result items in mobile context */
.mobile-search-container .search-result-item {
    padding: 1rem;
    border-bottom: 1px solid var(--color-neutral-100);
}

:is(.dark .mobile-search-container .search-result-item) {
    border-bottom-color: var(--color-neutral-800);
}

.mobile-search-container .search-result-item:active {
    background-color: var(--color-neutral-100);
}

:is(.dark .mobile-search-container .search-result-item:active) {
    background-color: var(--color-neutral-800);
}

.mobile-search-container .search-result-emoji {
    width: 2.75rem;
    height: 2.75rem;
    font-size: 1.375rem;
}

/* Show more button in mobile */
.mobile-search-container .search-show-more {
    margin: 0.75rem 1rem 1.5rem;
    padding: 1rem;
    background-color: var(--color-cc-blue-50);
    border: none;
    border-radius: 0.75rem;
    justify-content: center;
}

:is(.dark .mobile-search-container .search-show-more) {
    background-color: color-mix(
        in srgb,
        var(--color-cc-blue-900) 30%,
        transparent
    );
}

/* Loading and empty states in mobile */
.mobile-search-container .search-loading,
.mobile-search-container .search-no-results,
.mobile-search-container .search-error {
    padding: 3rem 1.5rem;
}

/* Placeholder styling */
.mobile-search-placeholder {
    position: fixed;
    top: 65px;
    left: 0;
    right: 0;
    bottom: 0;
}

/* ==========================================================================
   Accessibility & Focus States
   ========================================================================== */

.search-result-item:focus-visible,
.search-result-item-page:focus-visible,
.search-show-more:focus-visible {
    outline: 2px solid var(--color-cc-blue-500);
    outline-offset: -2px;
}

/* Keyboard navigation highlight */
.search-result-item.selected,
.search-show-more.selected {
    background-color: var(--color-cc-blue-50);
}

:is(.dark .search-result-item.selected),
:is(.dark .search-show-more.selected) {
    background-color: var(--color-cc-blue-900);
    background-color: color-mix(
        in srgb,
        var(--color-cc-blue-900) 30%,
        transparent
    );
}
